package np.playground.core;

import com.sun.org.apache.xerces.internal.impl.dv.util.Base64;
import javafx.stage.Stage;
import np.playground.core.util.PlaygroundUtil;
import org.osgi.framework.BundleContext;

import javax.imageio.ImageIO;
import java.awt.*;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;

public class PlayGroundTray extends TrayIcon {


//    private static final String TRAY_ICON_B64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADeElEQVQ4T12Tf0wbZRjHv/er1ytwd+0YMZkksOhQRKkzLnHOuGUumbpkfxhxFISGItqs28DMzAllRF1UspAwCEbdFlaIG6vxL9FMqQFiWF3FSYZYTBCxG39QruuA0t61d2fuDAnx+9f75nmfT77fN89D4H+qqXE/vf2hEt8jZY8eikZnLblcjqBpKvXnbHSYZbkvA4FLI5tbiI2L290slm5/4KtXXj28X1qKIzQyitjdGFRVw9aiQhQVFcEuiAj9EPr29u+/vTYzM7Nm9JqApqYmZteuZ254PO6n5hf+hrveA0VW8FhFOURexK9Tt0CRJGzWPDzhfBzLieWFSDhcPjk5uW4C/P6O4fb21pdomkb3+T709vbg2d270d9/0TT49snTCE/8BJuNgyzLeLhsB9ZWVq4Hg9cOEo2Nbx44ccL3fUVFBXQA73/wIQYDg3A6KxEMDpmAt44242Z4AnxBATRNRSYto/LJSvw1N7+faGvr+Lz9zOk3dJ2AhWEwMHgFLc3N2LatGCUlxXA4HJiamjJrIElA16GqKhjGAkAbIC5c6L/l8dQ711Ip0BSF9Hoa7gYPxsfHIQiC6cBht8OIZzRuyDiTFL1E9PT0KT6flzEAWUUBy1qxnl5HIDCI4W+GkZDikBL3QICAIPAAQZguNE0DTVMZorenTz7q81oMgJrLIZORQTM0rFYWKyspqJqGO3fu4uOzZxH55WfwhisdJoBl2Qxx+fJAtK6utmwDoChZKFkFiqLAynJQNR2ykoEOEk2NHkSnb4MXRTOO1cotEa2tZ744deqdRs5mRWp1FUo2ByWngLWw+DE0ilBoBK/X12PLlkKMjY3B/9674EUeuqqDZJh+4siR2ucaPA3jB17Yh2QyCcMBRZFI3r+P6upaRG7ewDHfcXiPHUdcSqDq8CHY8vJAgoSFs7xsDlJLy8lRv7/teUHksRxfhmaE1HV0dnYhOHQFH33SCefOnYj9E0Odqxr5+XmgKOr63PzcQRPgcrnse/bsC9e6qnbY8vMhJSTIGRkaCNyTJDAch4ICAd1d53Dxs0/hKNy6ICty+eLi4n+jbKij41yhJMWCLlf13uLiByHa7UinZfOzVtdSuHZ1COe7u0CT5HeCaq+aiW9aps3r6fV6X5TlXE1pacleAqqYzargbHxydvaPiUgkfHV6evrrze//BSDBgjwyng1OAAAAAElFTkSuQmCC";
    private static final String TRAY_ICON_B64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACmElEQVQ4T32TbUhTYRTH/9dtd17TrVxDdPlSIg5BBCHFMqOa1QdDslcXVqCgVOQXNUhLKyUI+tAXtS+VloItLUVJpJBeaFPMkaZLfGG+LNKmc867ue1uTygoalfPt3POn9/5n4fnUNgiYs6V0hIXfR2EzOhaiusBivBJKb5iUnrFiSWHrdo6a4pY7ktlij6Rr392d0tJz2b9BkBcWrmCoUj1nHk8jbWaAawOpbBDIkegPKzG7vQU9XWUzayCNgDOFzSXUV5XjuGHztdqnpRxbueKTiAUQ7o71Ma5HAOsZbp6YqCxhhegLtCUBSWklgo5F/ra3ximxgyRhIJQJKT11rmpWJHYj7azs1dNAy38gNwKbZVfeGQe47HDtSsYi8P97o66xw7nkl1CMxLQYgaL1j9bA9SFbQ/CopUlLrkCInYenMWC11XF8Ho98BHRIJwHxOu5YjI01/KukHmr6V5wguouzXEQcQ6woKF5mLsCWAuCrQErK0RE5jEcC2dgCLjJUTRVlmwCUJdNhncveR1cLGytCFfG3CayEOz1sYMmDrx4+ghjRuM6B9sAMm403FEkq+4zAgqT2jmwrAdx0XYM9bfiW3cvaF9/uBy2rKnBd6/+c/Brgg1pfPtFU9vQfCBelQ6GUwJeN6bNbij3UfhtbEXvzxGcPnmwLTszSx0VRS0sQ9Y+0qfvXAa78LeoTtOU2KPvx+Fj+VCfCoZ+kEVn1yL2BHzG2LgR13JyDIw0tDw1UVi/AbCcfNCRIFrA3RwZHczS6sdDA6SxSNkvQcN7C84cYe075dHP5xfET84ep4Z5H3G12K4l8bTInv9VZ77UqbMJUhJknCpZnnsoXvhs22Na3ySEUB+7PBfcHpIkJsLKo8nUEN/l/gMb9icgA0Nn0gAAAABJRU5ErkJggg==";
    //"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABsklEQVQ4T2NkQANPUlLi0MWQ+TJz5ixC5jOiK36amlqCzwDp2bN78BrwOCXFAZ8BsnPmHMBrgJ21iR/TfwYj3IYwPjhw7PQCmDwjyM+MjIxi/xkY9kRdOafFxMjEdODY6SWxQTaxv379ZWRi+s/IwsLyb/G6I4tBmhysTBqWaBtuYGRgcPn///8rFAOir5wLPHj8bENKmPViVxMeXwZGxj9gm/7/Z9l95svmOauOxjpYmdTjNCDm6vkAJhbGXcUhIrsevvrNbanNBdZ//Oo3Bnkx1q99a1+4/v3N7I7XAF0lTktjDU63eHdBhgt3voMNMFDhZFi48z3D2Rvfd12+9/04XgMUJNk4coOFi3/9+s/Cwc4ENuDHz38MbGyMfyavfdv74PmvH3gNYPjNOENelvVGZ4Yk//O3v8EGSAqzMpTPeP7x4ePfGgys/zPwGnDg2JmG/Fjr+WXR4glr9n98BjIgxJFfqmvpywUTFx9NxBsLoEAEGWBsbMylo8ie+e7j/zMMLAwMQtyMJlfu/5x+9uzZbxgGICcYByvTBAaG/wr4UiIDA1pCQldMcVKmODORmp0BfcT5YRAPTdkAAAAASUVORK5CYII="
    //TRAY_ICON_IMAGE = PlaygroundUtil.decodeBase64ToImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACf0lEQVQ4T2NkwAEyI6yXigmxSoOkX737/XT6iqPR2JQyIgsmBllWfv7598ibr78uh1kLnw+y41cAya859On+mqNvjMS4WPW4OVis56873g7TBzcgNcyqI8FLOPPthz+/bj75+dFOj0fx4aufr0EK5cXYRQ9d+nJfQ5adX4ifhW3+1ncz56w+WgaSAxsAsjnFT6SCm52Jj5uD6de0jW9Of3vPNNeQhf8ySP78n4+6XIL/krP8RUy//vjH9u3nv09rD3zK6V1wcDHYgDAvU7tYd5G1GnIcfC2LXyz4xiyT1SEoKM3OyAgOg5///z+teP/+KdffJ9NqYiUSVGTYnjP8/qfJaLX6O9gABwcDAW8ToTPP3vx+8eSrhH0fP78tMwNDwj9GRnAYMP3//+AvA8OCoo8fD8twvzioIcshvPzwa8sDBy58YASFtq4yh5WxOrfcvLUfU8rE1fdy/vvXFHXjwgKGfwwO4MBiYjiwTMMg4TsTU133ixsuiSECs8/e/Pro8t0fxxjrsxwOWGhz2X/+/vflu+PsPj4ikqwM//61x1w9f+DAsTMNYBdamTQs0TZ0YGBiqtzy5vlvIcufW3g5mcVPXP12kHIDQF7QVua0NFXnkifFC6dvfnt49e734/BAjLQVPX7j8Y+3xASilAirxNYz70zAgQjy4/9joZwMrEw37jz5JUFMNF5/+OPTot1vg9ZsPXUYbEBxgn1ssAPfFC6khPT9HeM8A1aBSyD5C78/6HEK/U+CJaSvP/99mrPpTQcoScOTckqodVeCp2DGu09/f+JKyuoy7PzCAixsC7a9nT571bEKeFKGZQxCmUmEm02Xl53ZBmtmQs+qxGZnADK/fDSODV+FAAAAAElFTkSuQmCC
    //"data:image/png;base64,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"

    public PlayGroundTray(Stage primaryStage, BundleContext context) {
        super(PlaygroundUtil.decodeBase64ToImage(TRAY_ICON_B64), "", null);
    }

}
